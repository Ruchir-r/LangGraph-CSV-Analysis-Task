# Version 2 Environment Configuration
# Copy to .env.v2.dev for development or .env.v2.prod for production

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME="Historical Multi-Table Data Analysis v2"
APP_VERSION="2.0.0"
DEBUG=true
ENVIRONMENT="development"

# =============================================================================
# DATABASE CONFIGURATION - PostgreSQL (V2 Production)
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=data_analysis_v2
POSTGRES_USER=data_analyst
POSTGRES_PASSWORD=your_secure_password_here

# SQLAlchemy Database URL
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Database Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# =============================================================================
# LLM PROVIDERS CONFIGURATION
# =============================================================================

# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_TEMPERATURE=0.1
OPENAI_MAX_TOKENS=4000

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_TEMPERATURE=0.1
ANTHROPIC_MAX_TOKENS=4000

# Google Gemini Configuration
GOOGLE_API_KEY=your-google-gemini-api-key-here
GEMINI_MODEL=gemini-pro
GEMINI_TEMPERATURE=0.1
GEMINI_MAX_TOKENS=4000
GEMINI_TOP_P=0.8
GEMINI_TOP_K=10

# Ollama Configuration (Local Models)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama2:7b-chat
OLLAMA_TIMEOUT=300

# Default LLM Provider (gemini, openai, anthropic, ollama)
DEFAULT_LLM_PROVIDER=gemini

# =============================================================================
# REDIS CONFIGURATION - Caching & Session Management
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Session Settings
SESSION_TIMEOUT=86400  # 24 hours
SESSION_SECRET=your-very-secure-session-secret-key-here

# Cache Settings
CACHE_TTL=3600  # 1 hour
ANALYSIS_CACHE_TTL=7200  # 2 hours

# =============================================================================
# CELERY CONFIGURATION - Background Tasks
# =============================================================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=application/json
CELERY_RESULT_SERIALIZER=json

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_HOST=localhost
API_PORT=8000
API_VERSION=v2
API_PREFIX=/api/v2

# CORS Settings
ALLOWED_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:8080"]
ALLOWED_METHODS=["*"]
ALLOWED_HEADERS=["*"]

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# FILE UPLOAD SETTINGS
# =============================================================================
MAX_FILE_SIZE=100MB  # Increased from V1
ALLOWED_FILE_TYPES=["csv", "xlsx", "xls", "parquet", "json"]
UPLOAD_DIR=./uploads
MAX_FILES_PER_SESSION=10

# =============================================================================
# LANGGRAPH CONFIGURATION
# =============================================================================
LANGGRAPH_MEMORY_LIMIT=1000  # Max conversation turns in memory
LANGGRAPH_TIMEOUT=300  # 5 minutes per workflow
LANGGRAPH_RETRY_ATTEMPTS=3
LANGGRAPH_LOG_LEVEL=INFO

# =============================================================================
# ANALYTICS CONFIGURATION
# =============================================================================
MAX_ANALYSIS_ROWS=1000000  # 1M rows max per analysis
ANALYSIS_TIMEOUT=600  # 10 minutes
STATISTICAL_SIGNIFICANCE_THRESHOLD=0.05
CORRELATION_THRESHOLD=0.3

# Time Series Settings
FORECAST_MAX_PERIODS=365
TREND_DETECTION_WINDOW=30

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/app.log
ENABLE_METRICS=true
METRICS_PORT=8001

# Sentry (Error Tracking)
# SENTRY_DSN=https://your-sentry-dsn-here

# =============================================================================
# SECURITY SETTINGS
# =============================================================================
SECRET_KEY=your-very-secure-secret-key-minimum-32-characters
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
BCRYPT_ROUNDS=12

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Set to false in production
AUTO_RELOAD=true
DEBUG_SQL=false
ENABLE_SWAGGER=true
ENABLE_REDOC=true

# Testing
TEST_DATABASE_URL=postgresql+asyncpg://test_user:test_pass@localhost:5432/test_db

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_MULTI_FILE_ANALYSIS=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_FORECASTING=true
ENABLE_ANOMALY_DETECTION=true
ENABLE_LLM_FALLBACK=true
ENABLE_REAL_TIME_UPDATES=false

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# In production, override these settings:
# DEBUG=false
# ENVIRONMENT=production
# LOG_LEVEL=WARNING
# ENABLE_SWAGGER=false
# AUTO_RELOAD=false
